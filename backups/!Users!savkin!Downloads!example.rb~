class User
  attr_reader :id, :name, :age, :followers

  def initialize id, name, age, followers = []
    @id, @name, @age, @followers = id, name, age, followers
  end
end

class Company
  attr_reader :id, :name, :country, :followers

  def initialize id, name, country, followers = []
    @id, @name, @country, @followers = id, name, country, followers
  end
end

class Database

  USERS = {
    1 => User.new(1, "John", 25)
    2 => User.new(2, "Sam", 26)
  }

  COMPANIES = {
    1 => Company.new(1, "Big Company", "Canada")
  }

  def find_user_by_id id
    USERS[id]
  end

  def find_company_by_id id
    COMPANIES[id]
  end

  def update_user user
    USERS[user.id] = user
  end

  def update_company company
    COMPANIES[company.id] = company
  end
end

module Follower
end

module Following
  def add_follower follower
    followers << follower
  end
end

class FollowersListContext

  def inititlize db
    @db = db
  end
  
  def add_follower_to_user following_user_id, follower_user_id
    following = @db.find_user_by_id folllowing_user_id
    follower = @db.find_user_by_id follower_user_id

    following.extend Following
    follower.extend Follower

    following.add_follower follower

    @db.update_user following
  end

  def add_follower_to_company following_company_id, follower_user_id
    following = @db.find_company_by_id following_company_id
    follower = @db.find_user_by_id follower_user_id

    following.extend Following
    follower.extend Follower

    following.add_follower follower

    @db.update_company following
  end
end

db = Database.new
context = FollowersListContext.new db
context.add_follower_to_user 1, 2
